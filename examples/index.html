<!doctype html>
<body>
	<div><canvas id='canvasOriginal'></canvas>	<label>original</label></div>
	<div><canvas id='canvasFliph'></canvas>		<label>fliph</label></div>
	<div><canvas id='canvasLuminance'></canvas>	<label>luminance</label></div>
	<div><canvas id='canvasSobel'></canvas>	<label>sobel</label></div>

	<script src="../imagedata.js"></script>

	<script>
		// get ctxOrig
		var canvas	= document.getElementById('canvasOriginal');
		var ctxOrig	= canvas.getContext('2d');

		// set width/height on all canvases
		var canvases	= document.getElementsByTagName('canvas');
		for(var i = 0; i < canvases.length; i++){
			var canvas	= canvases[i];
			canvas.width	= 64*2;
			canvas.height	= 64*2;
		};
		// get the image
		var image	= new Image();
		image.onload	= function(){ processing(image);	};
		image.src	= 'lenna.png';

		function processing(imageEl){
			// copy the original image
			ctxOrig.drawImage(imageEl, 0, 0, ctxOrig.canvas.width, ctxOrig.canvas.height);
			// get imageData
			var imgDataOrig	= ctxOrig.getImageData(0, 0, canvas.width, canvas.height);

			// fliph
			var ctxDst	= document.getElementById('canvasFliph').getContext('2d')
			var imgDataDst	= ImageData.duplicate(imgDataOrig, ctxOrig);
			ImageData.fliph(imgDataDst);
			ctxDst.putImageData(imgDataDst, 0, 0);

			// luminance
			var ctxDst	= document.getElementById('canvasLuminance').getContext('2d')
			var imgDataDst	= ImageData.duplicate(imgDataOrig, ctxOrig);
			ImageData.luminance(imgDataDst);
			ctxDst.putImageData(imgDataDst, 0, 0);

			// emboss
			var ctxDst	= document.getElementById('canvasSobel').getContext('2d')
			var imgDataDst	= ImageData.duplicate(imgDataOrig, ctxOrig);
			ImageData.sobel(imgDataDst, ctxOrig );
			ctxDst.putImageData(imgDataDst, 0, 0);
		};
	</script>
</body>